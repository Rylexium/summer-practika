# Летняя практика 2023

### Общее описание логики:

Cоздать сервис, который обращается к сервису курсов валют, и отображает gif:
если курс по отношению к USD за сегодня стал выше вчерашнего, то отдаем
рандомную [отсюда](https://giphy.com/search/rich),
если ниже - [отсюда](https://giphy.com/search/broke)

Ссылки:

* [REST API курсов валют](https://docs.openexchangerates.org/)
* [REST API гифок](https://developers.giphy.com/docs/api#quick-start-guide)

<div align = justify>

1. Создать проект на [GitLab](https://gitlab.com/). Заводим аккаунт и создаем новый проект, рекомендую
   выбрать Create blank project с прожатой галкой "Initialize repository with a README" (таким образом мастер
   ветка будет создана при инициализации) Наименование репозитория особой роли не играет, делайте на
   свой вкус. Сразу отбранчуйте от ветки мастер ветку dev, работать будем на ней. Добавьте меня
   разработчика к вам на проект (@tritonsy).
2. Написать скелет сервиса. Приложение будем делать на основе Spring, возьмем самую свежую версию (на
   данный момент 6) Сделать на базе Maven Использовать Spring Initializer (можно через IDE). Навскидку на
   этом этапе уже можно как минимум подтянуть необходимые зависимости (для интеграции с внешними
   системами по REST будем использовать Feign Client), также пригодятся Spring Data, в качестве СУБД
   попробуем PostgreSQL. Также для удобства будем использовать Swagger (реализацию openapi), подход
   design first (почитать про различия можно [тут](https://swagger.io/blog/code-first-vs-design-first-api/)).
3. Наладить интеграцию с сервисами курсов валют и giphy. Здесь нужно изучить документацию сервисов, по
   необходимости зарегистрироваться для получения токена. Создать описание Feign клиентов, попробовать
   локально. На этом этапе можно попробовать два подхода для http интеграций: 
   [retry и circuit breaker](https://dev.to/supriyasrivatsa/retry-vs-circuit-breaker-346o).
4. Настройка интеграции с СУБД. Предположим, что мы хотим сохранять факт вызова API с параметрами:
   исходная валюта, валюта другой страны, значение. На основе этих данных описать сущность (возможно
   стоит добавить какую-то мета информацию, подумайте над этим и поясните ваш выбор). С БД работаем
   через Spring Data Repositor. Для миграций БД используем FlyWay (как минимум первоначальная
   инициализация таблиц). Конфигурации подключения писать в пропертя (application.yml).
5. Имплементация. На данный момент имеем рабочие интеграции со внешними сервисами, рабочую
   интеграцию с БД Необходимо реализовать логику приложения описанную в самом начале. Создать в
   сваггере одну единственную API, которая будет выдавать гифку в зависимости от курса и привязать с
   сервисным методом, который исполняет логику. Покрыть ее тестами (использовать Mockito для внешних
   систем, БД можно закрыть либо testcontainers, либо также моком), не забыть использовать профиль test.
6. CI CD. Теперь у нас есть рабочее приложение, предположим, что у нас есть некий тестовый стенд (стенд
   разработки), попробуем автоматизировать доставку наших "ченджей" сразу на него.

       Для этого нужно создать gitlab ci файл с 3 стейджами:
        1. build - сборка приложения
        2. test - тестирование билда
        3. deploy - непосредственное обновление тестового стенда

   Обратите внимание, что не каждый коммит должен триггерить деплой приложения (только при пуше в dev
   ветку), подумайте почему При желании можно найти бесплатный аналог Heroku и использовать
   выбранную платформу как тестовый стенд, тогда deploy можно будет сделать приближенным к реальности

7. Мобильное приложение. Итак у нас есть сервис, у него есть 1 GET апи, которая при нажатии
   предоставляет некий ресурс (в нашем случае гифку) Напишем минимальное приложение на Flutter, с
   экраном и кнопкой, при нажатии на которую будет отображаться гифка, пришедшая с нашего сервера За
   основу можно взять любой экран из имеющихся на офф сайте шаблонов.

</div>
